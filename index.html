
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://upstreamdatainc.github.io/goosebit/">
      
      
      
        <link rel="next" href="goosebit_simple_stats/">
      
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.20">
    
    
      
        <title>gooseBit</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.e53b48f4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#goosebit" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="gooseBit" class="md-header__button md-logo" aria-label="gooseBit" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            gooseBit
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Home
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/UpstreamDataInc/goosebit" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    gooseBit
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="gooseBit" class="md-nav__button md-logo" aria-label="gooseBit" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    gooseBit
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/UpstreamDataInc/goosebit" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    gooseBit
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#deployment" class="md-nav__link">
    <span class="md-ellipsis">
      Deployment
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deployment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#docker-compose-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Docker Compose Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database" class="md-nav__link">
    <span class="md-ellipsis">
      Database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#artifact-storage" class="md-nav__link">
    <span class="md-ellipsis">
      Artifact Storage
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assumptions" class="md-nav__link">
    <span class="md-ellipsis">
      Assumptions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#features" class="md-nav__link">
    <span class="md-ellipsis">
      Features
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#device-registry" class="md-nav__link">
    <span class="md-ellipsis">
      Device Registry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#software-repository" class="md-nav__link">
    <span class="md-ellipsis">
      Software Repository
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#device-update-modes" class="md-nav__link">
    <span class="md-ellipsis">
      Device Update Modes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Device Update Modes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-manual-update-to-specified-software" class="md-nav__link">
    <span class="md-ellipsis">
      1. Manual Update to Specified Software
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-automatic-update-to-latest-software" class="md-nav__link">
    <span class="md-ellipsis">
      2. Automatic Update to Latest Software
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-software-rollout" class="md-nav__link">
    <span class="md-ellipsis">
      3. Software Rollout
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pause-updates" class="md-nav__link">
    <span class="md-ellipsis">
      Pause Updates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#real-time-update-logs" class="md-nav__link">
    <span class="md-ellipsis">
      Real-time Update Logs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#development-with-poetry" class="md-nav__link">
    <span class="md-ellipsis">
      Development with Poetry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Development with Poetry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initial-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Initial Setup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database_1" class="md-nav__link">
    <span class="md-ellipsis">
      Database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#code-formatting-and-linting" class="md-nav__link">
    <span class="md-ellipsis">
      Code formatting and linting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    <span class="md-ellipsis">
      Testing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#development-with-docker-and-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      Development with Docker (and PostgreSQL)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Development with Docker (and PostgreSQL)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#running-the-containers" class="md-nav__link">
    <span class="md-ellipsis">
      Running the Containers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#applying-the-migrations" class="md-nav__link">
    <span class="md-ellipsis">
      Applying the Migrations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-the-interactive-debugger" class="md-nav__link">
    <span class="md-ellipsis">
      Using the Interactive Debugger
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#structure" class="md-nav__link">
    <span class="md-ellipsis">
      Structure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="goosebit_simple_stats/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Simple Stats Plugin
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="goosebit_forwarded_header/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Forwarded HTTP Header Plugin
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#deployment" class="md-nav__link">
    <span class="md-ellipsis">
      Deployment
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deployment">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#docker-compose-demo" class="md-nav__link">
    <span class="md-ellipsis">
      Docker Compose Demo
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database" class="md-nav__link">
    <span class="md-ellipsis">
      Database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#artifact-storage" class="md-nav__link">
    <span class="md-ellipsis">
      Artifact Storage
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assumptions" class="md-nav__link">
    <span class="md-ellipsis">
      Assumptions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#features" class="md-nav__link">
    <span class="md-ellipsis">
      Features
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#device-registry" class="md-nav__link">
    <span class="md-ellipsis">
      Device Registry
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#software-repository" class="md-nav__link">
    <span class="md-ellipsis">
      Software Repository
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#device-update-modes" class="md-nav__link">
    <span class="md-ellipsis">
      Device Update Modes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Device Update Modes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-manual-update-to-specified-software" class="md-nav__link">
    <span class="md-ellipsis">
      1. Manual Update to Specified Software
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-automatic-update-to-latest-software" class="md-nav__link">
    <span class="md-ellipsis">
      2. Automatic Update to Latest Software
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-software-rollout" class="md-nav__link">
    <span class="md-ellipsis">
      3. Software Rollout
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pause-updates" class="md-nav__link">
    <span class="md-ellipsis">
      Pause Updates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#real-time-update-logs" class="md-nav__link">
    <span class="md-ellipsis">
      Real-time Update Logs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#development-with-poetry" class="md-nav__link">
    <span class="md-ellipsis">
      Development with Poetry
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Development with Poetry">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#initial-setup" class="md-nav__link">
    <span class="md-ellipsis">
      Initial Setup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#database_1" class="md-nav__link">
    <span class="md-ellipsis">
      Database
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#code-formatting-and-linting" class="md-nav__link">
    <span class="md-ellipsis">
      Code formatting and linting
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing" class="md-nav__link">
    <span class="md-ellipsis">
      Testing
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#development-with-docker-and-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      Development with Docker (and PostgreSQL)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Development with Docker (and PostgreSQL)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#running-the-containers" class="md-nav__link">
    <span class="md-ellipsis">
      Running the Containers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#applying-the-migrations" class="md-nav__link">
    <span class="md-ellipsis">
      Applying the Migrations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-the-interactive-debugger" class="md-nav__link">
    <span class="md-ellipsis">
      Using the Interactive Debugger
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#architecture" class="md-nav__link">
    <span class="md-ellipsis">
      Architecture
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#structure" class="md-nav__link">
    <span class="md-ellipsis">
      Structure
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="goosebit">gooseBit</h1>
<p><img src="https://upstreamdatainc.github.io/goosebit/img/goosebit-logo.png" style="width: 100px; height: 100px; display: block;"></p>
<p><a href="https://scorecard.dev/viewer/?uri=github.com/UpstreamDataInc/goosebit"><img alt="OpenSSF Scorecard" src="https://api.scorecard.dev/projects/github.com/UpstreamDataInc/goosebit/badge" /></a></p>
<hr />
<p>A simplistic, opinionated remote update server implementing hawkBitâ„¢'s <a href="https://eclipse.dev/hawkbit/apis/ddi_api/">DDI API</a>.</p>
<h2 id="deployment">Deployment</h2>
<h3 id="docker-compose-demo">Docker Compose Demo</h3>
<p>The Docker Compose demo <a href="https://github.com/UpstreamDataInc/goosebit/blob/master/docker/demo/docker-compose.yml">docker/demo/docker-compose.yml</a> may serve as inspiration for a containerized (cloud) deployment.
It uses PostgreSQL as the database and NGINX as a reverse proxy.</p>
<blockquote>
<p>[!WARNING]
Do not use the demo (as-is) in production!</p>
</blockquote>
<p>Make sure you have <a href="https://www.docker.com/get-started/">Docker</a> (and Docker Compose) installed.
Then run:</p>
<div class="highlight"><pre><span></span><code>docker compose -f docker/demo/docker-compose.yml up
</code></pre></div>
<p>Visit gooseBit at: <a href="https://localhost">https://localhost</a></p>
<h3 id="configuration">Configuration</h3>
<p>gooseBit can be configured through a configuration file (<code>/etc/goosebit.yaml</code>) or by setting environment variables.
For the available options and their defaults, see <a href="https://github.com/UpstreamDataInc/goosebit/blob/master/goosebit.yaml">goosebit.yaml</a>.
The environment variable corresponding to e.g. the <code>poll_time</code> YAML setting would be <code>GOOSEBIT_POLL_TIME</code>.
Environment variables for nested settings are constructed using <code>__</code> as the separator:</p>
<div class="highlight"><pre><span></span><code>GOOSEBIT_DEVICE_AUTH__ENABLE=true
</code></pre></div>
<p>Alternatively, a JSON string can be assigned:</p>
<div class="highlight"><pre><span></span><code>GOOSEBIT_DEVICE_AUTH=&#39;{&quot;enable&quot;: true}&#39;
</code></pre></div>
<h3 id="database">Database</h3>
<p>By default, SQLite is used as the database. For more sophisticated setups, PostgreSQL is supported.
To use PostgreSQL, set <code>db_uri</code> or the <code>GOSSEBIT_DB_URI</code> environment variable to something like:</p>
<div class="highlight"><pre><span></span><code>postgres://user:password@host:5432/db_name
</code></pre></div>
<h3 id="artifact-storage">Artifact Storage</h3>
<p>The software packages managed by gooseBit are either stored on the local filesystem (<code>artifacts_dir</code> setting) or an S3-compatible object storage.</p>
<h2 id="assumptions">Assumptions</h2>
<ul>
<li>Devices use <a href="https://swupdate.org">SWUpdate</a> or <a href="https://rauc.io">RAUC</a> + <a href="https://rauc-hawkbit-updater.readthedocs.io">RAUC hawkBit Updater</a> for managing software updates.</li>
<li>Devices send certain attributes (<code>sw_version</code>, <code>hw_boardname</code>, <code>hw_revision</code>).</li>
<li>Semantic versions are used.</li>
</ul>
<h2 id="features">Features</h2>
<h3 id="device-registry">Device Registry</h3>
<p>When a device connects to gooseBit for the first time, it is automatically added to the device registry. The server will then request the device's configuration data, including:</p>
<ul>
<li><code>hw_boardname</code> and <code>hw_revision</code>: Used to match compatible software.</li>
<li><code>sw_version</code>: Indicates the currently installed software version.</li>
</ul>
<p>The registry tracks each device's status, including the last online timestamp, installed software version, update state, and more.</p>
<h3 id="software-repository">Software Repository</h3>
<p>Software packages (<code>*.swu</code>/<code>*.raucb</code> files) can be hosted directly on the gooseBit server or on an external server. gooseBit parses the software metadata to determine compatibility with specific hardware models and revisions.</p>
<h3 id="device-update-modes">Device Update Modes</h3>
<p>Devices can be configured with different update modes. The default mode is <code>Rollout</code>.</p>
<h4 id="1-manual-update-to-specified-software">1. Manual Update to Specified Software</h4>
<p>Assign specific software to a device manually. Once installed, no further updates will be triggered.</p>
<h4 id="2-automatic-update-to-latest-software">2. Automatic Update to Latest Software</h4>
<p>Automatically updates the device to the latest compatible software, based on the reported <code>hw_boardname</code> and <code>hw_revision</code>. Note: versions are interpreted as <a href="https://semver.org">SemVer</a> versions.</p>
<h4 id="3-software-rollout">3. Software Rollout</h4>
<p>Rollouts target all devices with a specified "feed" value, ensuring that the assigned software is installed on all matching devices. Rollouts also track success and error rates, with future plans for automatic aborts. If multiple rollouts exist for the same feed, the most recent rollout takes precedence.</p>
<h3 id="pause-updates">Pause Updates</h3>
<p>Devices can be pinned to their current software version, preventing any updates from being applied.</p>
<h3 id="real-time-update-logs">Real-time Update Logs</h3>
<p>While updates are in progress, gooseBit captures real-time logs, which are accessible through the device repository.</p>
<h2 id="development-with-poetry">Development with Poetry</h2>
<h3 id="initial-setup">Initial Setup</h3>
<p>Install Poetry as described <a href="https://python-poetry.org/docs/#installation">here</a>.</p>
<p>Then, to install gooseBit's dependencies, run:</p>
<div class="highlight"><pre><span></span><code>poetry install
</code></pre></div>
<p>Initialize the database:</p>
<div class="highlight"><pre><span></span><code>poetry run aerich upgrade
</code></pre></div>
<p>Launch gooseBit:</p>
<div class="highlight"><pre><span></span><code>poetry run python -m goosebit
</code></pre></div>
<p>The service is now available at: <a href="http://localhost:60053">http://localhost:60053</a></p>
<h3 id="database_1">Database</h3>
<p>Initialize or migrate database:</p>
<div class="highlight"><pre><span></span><code>poetry run aerich upgrade
</code></pre></div>
<p>After a model change create the migration:</p>
<div class="highlight"><pre><span></span><code>poetry run aerich migrate
</code></pre></div>
<p>To seed some sample data (attention: drops all current data) use:</p>
<div class="highlight"><pre><span></span><code>poetry run generate-sample-data
</code></pre></div>
<h3 id="code-formatting-and-linting">Code formatting and linting</h3>
<p>Code is formatted using different tools</p>
<ul>
<li>black and isort for <code>*.py</code></li>
<li>biomejs for <code>*.js</code>, <code>*.json</code></li>
<li>prettier for <code>*.html</code>, <code>*.md</code>, <code>*.yml</code>, <code>*.yaml</code></li>
</ul>
<p>Code is linted using different tools as well</p>
<ul>
<li>flake8 for <code>*.py</code></li>
<li>biomejs for <code>*.js</code></li>
</ul>
<p>Best to have pre-commit install git hooks that run all those tools before a commit:</p>
<div class="highlight"><pre><span></span><code>poetry run pre-commit install
</code></pre></div>
<p>To manually apply the hooks to all files use:</p>
<div class="highlight"><pre><span></span><code>poetry run pre-commit run --all-files
</code></pre></div>
<h3 id="testing">Testing</h3>
<p>Tests are implemented using pytest. You can run all the tests with:</p>
<div class="highlight"><pre><span></span><code>poetry run pytest
</code></pre></div>
<p>To run only the unit tests:</p>
<div class="highlight"><pre><span></span><code>poetry run pytest tests/unit
</code></pre></div>
<p>To run only the end-to-end tests:</p>
<div class="highlight"><pre><span></span><code>poetry run pytest tests/e2e
</code></pre></div>
<h2 id="development-with-docker-and-postgresql">Development with Docker (and PostgreSQL)</h2>
<h3 id="running-the-containers">Running the Containers</h3>
<div class="highlight"><pre><span></span><code>docker compose -f docker/docker-compose-dev.yml up --build
</code></pre></div>
<h3 id="applying-the-migrations">Applying the Migrations</h3>
<div class="highlight"><pre><span></span><code>docker exec goosebit-dev python -m aerich upgrade
</code></pre></div>
<h3 id="using-the-interactive-debugger">Using the Interactive Debugger</h3>
<p>You might need <a href="https://github.com/hanslub42/rlwrap">rlwrap</a> to fix readline support.</p>
<p>Place <code>breakpoint()</code> before the code you want to debug. The server will reload automatically.
Then, connect to remote PDB (when the breakpoint has been hit):</p>
<div class="highlight"><pre><span></span><code>rlwrap telnet localhost 4444
</code></pre></div>
<p>To exit the debugger, press <code>Ctrl + ]</code> and then <code>q</code>.</p>
<h2 id="architecture">Architecture</h2>
<h3 id="structure">Structure</h3>
<p>The structure of gooseBit is as follows:</p>
<ul>
<li><code>api</code>: Files for the API.</li>
<li><code>ui</code>: Files for the UI.</li>
<li><code>bff</code>: Backend for frontend API.</li>
<li><code>static</code>: Static files.</li>
<li><code>templates</code>: Jinja2 formatted templates.</li>
<li><code>nav</code>: Navbar handler.</li>
<li><code>updater</code>: DDI API handler and device update manager.</li>
<li><code>updates</code>: SWUpdate/RAUC file parsing.</li>
<li><code>auth</code>: Authentication functions and permission handling.</li>
<li><code>models</code>: Database models.</li>
<li><code>db</code>: Database config and initialization.</li>
<li><code>schema</code>: Pydantic models used for API type hinting.</li>
<li><code>settings</code>: Settings loader and handler.</li>
<li><code>storage</code>: Storage for software artifacts.</li>
<li><code>telemetry</code>: Telemetry data handlers.</li>
<li><code>routes</code>: Routes for a giving endpoint, including the router.</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>